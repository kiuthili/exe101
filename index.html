<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Board Game Helper ‚Äî X√∫c X·∫Øc, Hi·ªáu ·ª®ng & Trap</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root { 
      --die-size: clamp(120px, 30vh, 220px); /* ∆Øu ti√™n chi·ªÅu cao khung h√¨nh ngang */
      --pip-size: clamp(10px, 3.2vh, 18px);
      --shadow: 0 6px 18px rgba(0,0,0,.15);
    }
    body { background:#f7fafc; min-height:100vh; }

    /* ===== Dice ===== */
    .die { width: var(--die-size); height: var(--die-size); border-radius:20px; background:#fff; box-shadow:var(--shadow); margin:auto; position:relative; }
    .pip { position:absolute; width:var(--pip-size); height: var(--pip-size); border-radius:50%; background:#111; }
    .tl{top:14%;left:14%}.tc{top:14%;left:50%;transform:translateX(-50%)}.tr{top:14%;right:14%}
    .ml{top:50%;left:14%;transform:translateY(-50%)}.mc{top:50%;left:50%;transform:translate(-50%,-50%)}.mr{top:50%;right:14%;transform:translateY(-50%)}
    .bl{bottom:14%;left:14%}.bc{bottom:14%;left:50%;transform:translateX(-50%)}.br{bottom:14%;right:14%}

    /* ===== Layout ===== */
    .toolbar { position: sticky; top:0; z-index:1020; background: var(--bs-body-bg); padding-top:.5rem; }

    /* L∆∞·ªõi ba c·ªôt ∆∞u ti√™n landscape: hai b√™n h·∫πp, gi·ªØa r·ªông */
    .landscape-grid { display:grid; gap: 12px; grid-template-columns: 1fr 1.6fr 1fr; align-items: start; }

    /* Card g·ªçn cho c·ªôt b√™n */
    .mini-card .card-body { padding: .75rem; }
    .mini-card .btn { padding: .5rem .6rem; font-size:.95rem; }
    .mini-card .result { min-height: 3.6em; }

    /* Tr√™n m√†n h√¨nh r·∫•t th·∫•p (ƒëi·ªán tho·∫°i n·∫±m ngang nh·ªè) */
    @media (max-height: 420px) {
      .mini-card .card-body { padding: .5rem; }
      .mini-card .btn { padding: .4rem .5rem; font-size:.9rem; }
    }

    /* ·∫®n app khi d·ªçc, hi·ªán overlay nh·∫Øc xoay ngang */
    #rotateOverlay { display:none; position: fixed; inset:0; background: linear-gradient(135deg,#fdfbfb,#ebedee); z-index: 2000; align-items:center; justify-content:center; text-align:center; padding:2rem; }
    #rotateOverlay .box { max-width:520px; }
    @media (orientation: portrait) { #appContent{display:none!important} #rotateOverlay{display:flex} }
    @media (orientation: landscape) { #appContent{display:block} #rotateOverlay{display:none} }
  </style>
</head>
<body>
  <!-- Portrait overlay -->
  <div id="rotateOverlay">
    <div class="box">
      <div class="display-6 mb-3">üîÑ Vui l√≤ng xoay ngang ƒëi·ªán tho·∫°i</div>
      <p class="lead">Giao di·ªán t·ªëi ∆∞u 3 c·ªôt: <strong>Hi·ªáu ·ª©ng</strong> ‚Äî <strong>X√∫c x·∫Øc</strong> ‚Äî <strong>Trap</strong>.</p>
      <p class="text-muted mb-0">M·∫πo: T·∫Øt kh√≥a xoay m√†n h√¨nh n·∫øu kh√¥ng xoay ƒë∆∞·ª£c.</p>
    </div>
  </div>

  <!-- App content (landscape) -->
  <div id="appContent" class="container py-2">
    <div class="toolbar d-flex justify-content-between align-items-center mb-2">
      <h1 class="h6 mb-0">üé≤ Board Game Helper</h1>
      <div class="d-flex gap-2">
        <button id="btnClearLogs" class="btn btn-outline-danger btn-sm">üßπ X√≥a l·ªãch s·ª≠</button>
      </div>
    </div>

    <div class="landscape-grid">
      <!-- LEFT: Effects -->
      <section class="mini-card">
        <div class="card mb-2">
          <div class="card-header py-2">Hi·ªáu ·ª©ng th∆∞·ªùng</div>
          <div class="card-body">
            <div class="d-flex gap-2 flex-wrap mb-2">
              <button class="btn btn-success flex-fill" id="drawBenefit">‚úÖ C√≥ l·ª£i</button>
              <button class="btn btn-warning flex-fill" id="drawHarm">‚ö†Ô∏è B·∫•t l·ª£i</button>
            </div>
            <div class="result small" id="resultNormal">Ch∆∞a r√∫t.</div>
          </div>
        </div>
        <div class="card">
          <div class="card-header py-2">Hi·ªáu ·ª©ng c·ª±c m·∫°nh</div>
          <div class="card-body">
            <div class="d-flex gap-2 flex-wrap mb-2">
              <button class="btn btn-success flex-fill" id="drawBenefitX">üí• C√≥ l·ª£i CM</button>
              <button class="btn btn-warning flex-fill" id="drawHarmX">üî• B·∫•t l·ª£i CM</button>
            </div>
            <div class="result small" id="resultExtreme">Ch∆∞a r√∫t.</div>
          </div>
        </div>
      </section>

      <!-- CENTER: Dice prominent -->
      <section>
        <div class="card text-center">
          <div class="card-header py-2">X√∫c x·∫Øc</div>
          <div class="card-body">
            <div id="die" class="die mb-3"></div>
            <div class="d-flex justify-content-center gap-2">
              <button id="btnRoll" class="btn btn-primary btn-lg">üé≤ L·∫Øc</button>
              <button id="btnRoll3" class="btn btn-outline-primary">üé≤√ó3</button>
            </div>
            <div class="mt-2">K·∫øt qu·∫£: <span id="rollResult" class="fw-bold">‚Äî</span></div>
          </div>
        </div>
        <div class="card mt-2">
          <div class="card-header py-2">üìú L·ªãch s·ª≠</div>
          <div class="card-body p-0">
            <ul class="list-group list-group-flush" id="history"></ul>
          </div>
        </div>
      </section>

      <!-- RIGHT: Trap compact -->
      <section class="mini-card">
        <div class="card">
          <div class="card-header py-2 d-flex justify-content-between align-items-center">
            <span>Trap</span>
            <button id="drawTrap" class="btn btn-sm btn-dark">üéØ Random</button>
          </div>
          <div class="card-body">
            <div class="result" id="trapResult">Ch∆∞a b·ªëc thƒÉm trap n√†o.</div>
          </div>
        </div>
      </section>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // ===== DATA =====
    const DATA={
      benefit:[
        {title:"ƒê·ª° ƒê√≤n Th√†nh C√¥ng",desc:"Mi·ªÖn tr·ª´ hi·ªáu ·ª©ng b·∫•t l·ª£i ti·∫øp theo t·ª´ ƒë·ªëi th·ªß ho·∫∑c t·ª´ √¥ b·∫°n ƒë·ª©ng v√†o."},
        {title:"Kh√≥a Tay Nhu Thu·∫≠t",desc:"\"Kh√≥a\" m·ªôt ng∆∞·ªùi ch∆°i kh√°c, khi·∫øn h·ªç m·∫•t l∆∞·ª£t ·ªü v√≤ng ti·∫øp theo."},
        {title:"H·ªìi S·ª©c",desc:"H·ªìi ph·ª•c 1 m·∫°ng (n·∫øu c√≥) ho·∫∑c tho√°t kh·ªèi m·ªôt hi·ªáu ·ª©ng ti√™u c·ª±c ƒëang √°p d·ª•ng l√™n b·∫°n."}],
      harm:[
        {title:"M·∫•t ThƒÉng B·∫±ng",desc:"L√πi l·∫°i 5 √¥."},
        {title:"ƒê·ªëi Th·ªß M·∫°nh H∆°n",desc:"B·ªã ƒë·∫©y l√πi v·ªÅ v·ªã tr√≠ c·ªßa ng∆∞·ªùi ch∆°i x·∫øp nh·∫•t tr∆∞·ªõc b·∫°n."},
        {title:"M·ªát M·ªèi",desc:"S·ªë √¥ di chuy·ªÉn l∆∞·ª£t ti·∫øp theo b·ªã gi·∫£m m·ªôt n·ª≠a (l√†m tr√≤n xu·ªëng)."},
        {title:"Bong G√¢n",desc:"B·ªè l∆∞·ª£t ti·∫øp theo ƒë·ªÉ \"h·ªìi ph·ª•c\"."}],
      benefitX:[
        {title:"T√°i hi·ªán tuy·ªát k·ªπ",desc:"G√¢y ·∫£nh h∆∞·ªüng tr·ª±c ti·∫øp ƒë·∫øn t·∫•t c·∫£ ng∆∞·ªùi ch∆°i kh√°c, b·∫°n ch·ªçn 1 hi·ªáu ·ª©ng duy nh·∫•t √°p d·ª•ng."},
        {title:"B·∫≠t th·∫ßy",desc:"B·∫°n ƒë∆∞·ª£c mi·ªÖn nhi·ªÖm ho√†n to√†n v·ªõi m·ªçi hi·ªáu ·ª©ng b·∫•t l·ª£i trong 2 v√≤ng."},
        {title:"Song ƒê·∫•u Th·∫Øng L·ª£i",desc:"ƒê∆∞·ª£c r√∫t th√™m 2 th·∫ª hi·ªáu ·ª©ng v√† gi·ªØ l·∫°i ƒë·ªÉ d√πng sau."}],
      harmX:[
        {title:"Ch·∫•n th∆∞∆°ng n·∫∑ng",desc:"B·ªè l∆∞·ª£t li√™n ti·∫øp 2 v√≤ng, tr·∫£ l·∫°i 1 th·∫ª hi·ªáu ·ª©ng c√≥ l·ª£i (n·∫øu c√≥)."},
        {title:"Th·∫•t b·∫°i t√¢m l√≠",desc:"ƒê·ªïi v·ªã tr√≠ cho ng∆∞·ªùi ch∆°i cu·ªëi c√πng, m·∫•t to√†n b·ªô hi·ªáu ·ª©ng c√≥ l·ª£i."},
        {title:"L·ªói k·ªπ thu·∫≠t tr·∫ßm tr·ªçng",desc:"L√πi v·ªÅ √¥ xu·∫•t ph√°t, gi·∫£m 1 √¥ di chuy·ªÉn vƒ©nh vi·ªÖn."}],
      traps:[
        {title:"M·∫•t V√µ C√¥ng",desc:"M·∫•t l∆∞·ª£t ti·∫øp theo (√°p d·ª•ng cho ng∆∞·ªùi ch∆°i kh√°c)."},
        {title:"Chi√™u ƒê√°nh L√©n",desc:"L·∫•y 1 th·∫ª t·ª´ tay ƒë·ªëi th·ªß (ch·ªçn ng∆∞·ªùi ch∆°i kh√°c)."},
        {title:"Tr∆∞·ª£t K·ªπ Thu·∫≠t",desc:"L√πi 2 √¥, √°p d·ª•ng cho b·∫£n th√¢n."},
        {title:"M·∫•t V≈© Kh√≠",desc:"M·∫•t hi·ªáu ·ª©ng c·ªßa 1 th·∫ª k·ªπ nƒÉng ƒëang s·ªü h·ªØu."},
        {title:"B·ªã Kh√≥a ƒê√≤n",desc:"Kh√¥ng ƒë∆∞·ª£c d√πng k·ªπ nƒÉng trong 1 l∆∞·ª£t k·∫ø ti·∫øp."},
        {title:"Ng√£ S√†n",desc:"Quay l·∫°i √¥ xu·∫•t ph√°t c·ªßa v√≤ng n√†y."},
        {title:"Tinh Th·∫ßn Th∆∞·ª£ng V√µ",desc:"B·∫Øt bu·ªôc t·∫∑ng 1 th·∫ª th∆∞·ªüng cho ng∆∞·ªùi kh√°c."},
        {title:"ƒê√≤n Ch∆∞·ªüng L·∫°c ƒê·ªÅ",desc:"M·∫•t 1 l∆∞·ª£t v√† ph·∫£i k·ªÉ t√™n 1 th·∫ø v√µ ho·∫∑c danh lam VN."},
        {title:"V√µ Sinh H·ªìn Lo·∫°n",desc:"ƒê·ªïi to√†n b·ªô th·∫ª v·ªõi ng∆∞·ªùi b√™n ph·∫£i."},
        {title:"S∆∞ Ph·ª• Ki·ªÉm Tra",desc:"Tr·∫£ l·ªùi c√¢u h·ªèi nhanh, sai th√¨ m·∫•t l∆∞·ª£t ti·∫øp theo."}]
    };

    // ===== Helpers =====
    const qs = s => document.querySelector(s);
    function rng(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
    function renderDie(n){const die=qs('#die');die.innerHTML='';const map={1:['mc'],2:['tl','br'],3:['tl','mc','br'],4:['tl','tr','bl','br'],5:['tl','tr','mc','bl','br'],6:['tl','ml','tr','mr','bl','br']};map[n].forEach(pos=>{const p=document.createElement('span');p.className='pip '+pos;die.appendChild(p);});}
    function addHistory(kind, text){const li=document.createElement('li');li.className='list-group-item d-flex justify-content-between align-items-start';li.innerHTML=`<span><span class="badge text-bg-secondary me-2">${kind}</span>${text}</span>`;qs('#history').prepend(li);}

    // Init
    renderDie(6);

    // Dice actions
    qs('#btnRoll').addEventListener('click', ()=>{const n=rng(1,6);renderDie(n);qs('#rollResult').textContent=n;addHistory('üé≤',`X√∫c x·∫Øc ‚Üí <strong>${n}</strong>`);});
    qs('#btnRoll3').addEventListener('click', async ()=>{
      let results=[]; const rollOnce=()=>new Promise(res=>{setTimeout(()=>{const n=rng(1,6);renderDie(n);res(n);},220)});
      for(let i=0;i<3;i++) results.push(await rollOnce());
      qs('#rollResult').innerHTML = `${results.join(' + ')} = <strong>${results.reduce((a,b)=>a+b,0)}</strong>`;
      addHistory('üé≤', `3 l·∫ßn ‚Üí <strong>${results.join(' + ')}</strong>`);
    });

    // Drawers (no-repeat per pool until exhausted)
    function makeDrawer(items){ let pool=[...items]; return { draw(){ if(pool.length===0) pool=[...items]; const idx=rng(0,pool.length-1); return pool.splice(idx,1)[0]; }, reset(){ pool=[...items]; } } }
    const drawers = { benefit:makeDrawer(DATA.benefit), harm:makeDrawer(DATA.harm), benefitX:makeDrawer(DATA.benefitX), harmX:makeDrawer(DATA.harmX), trap:makeDrawer(DATA.traps) };

    // Buttons left & right
    qs('#drawBenefit').addEventListener('click', ()=>{const p=drawers.benefit.draw(); qs('#resultNormal').innerHTML=`<strong>${p.title}</strong><br><small>${p.desc}</small>`; addHistory('‚úÖ', `<strong>${p.title}</strong>`);});
    qs('#drawHarm').addEventListener('click', ()=>{const p=drawers.harm.draw(); qs('#resultNormal').innerHTML=`<strong>${p.title}</strong><br><small>${p.desc}</small>`; addHistory('‚ö†Ô∏è', `<strong>${p.title}</strong>`);});
    qs('#drawBenefitX').addEventListener('click', ()=>{const p=drawers.benefitX.draw(); qs('#resultExtreme').innerHTML=`<strong>${p.title}</strong><br><small>${p.desc}</small>`; addHistory('üí•', `<strong>${p.title}</strong>`);});
    qs('#drawHarmX').addEventListener('click', ()=>{const p=drawers.harmX.draw(); qs('#resultExtreme').innerHTML=`<strong>${p.title}</strong><br><small>${p.desc}</small>`; addHistory('üî•', `<strong>${p.title}</strong>`);});

    qs('#drawTrap').addEventListener('click', ()=>{const t=drawers.trap.draw(); qs('#trapResult').innerHTML=`<strong>${t.title}</strong><br><small>${t.desc}</small>`; addHistory('üéØ', `<strong>${t.title}</strong>`);});

    // Clear history
    qs('#btnClearLogs').addEventListener('click', ()=>{qs('#history').innerHTML='';});
  </script>
</body>
</html>
