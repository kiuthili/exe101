<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Board Game Helper â€” XÃºc Xáº¯c, Hiá»‡u á»¨ng & Trap</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root { 
      --die-size: clamp(120px, 30vh, 220px); /* Æ¯u tiÃªn chiá»u cao khung hÃ¬nh ngang */
      --pip-size: clamp(10px, 3.2vh, 18px);
      --shadow: 0 6px 18px rgba(0,0,0,.15);
    }
    body { background:#f7fafc; min-height:100vh; }

    /* ===== Dice ===== */
    .die { width: var(--die-size); height: var(--die-size); border-radius:20px; background:#fff; box-shadow:var(--shadow); margin:auto; position:relative; }
    .pip { position:absolute; width:var(--pip-size); height: var(--pip-size); border-radius:50%; background:#111; }
    .tl{top:14%;left:14%}.tc{top:14%;left:50%;transform:translateX(-50%)}.tr{top:14%;right:14%}
    .ml{top:50%;left:14%;transform:translateY(-50%)}.mc{top:50%;left:50%;transform:translate(-50%,-50%)}.mr{top:50%;right:14%;transform:translateY(-50%)}
    .bl{bottom:14%;left:14%}.bc{bottom:14%;left:50%;transform:translateX(-50%)}.br{bottom:14%;right:14%}

    /* ===== Layout ===== */
    .toolbar { position: sticky; top:0; z-index:1020; background: var(--bs-body-bg); padding-top:.5rem; }

    /* LÆ°á»›i ba cá»™t Æ°u tiÃªn landscape: hai bÃªn háº¹p, giá»¯a rá»™ng */
    .landscape-grid { display:grid; gap: 12px; grid-template-columns: 1fr 1.6fr 1fr; align-items: start; }

    /* Card gá»n cho cá»™t bÃªn */
    .mini-card .card-body { padding: .75rem; }
    .mini-card .btn { padding: .5rem .6rem; font-size:.95rem; }
    .mini-card .result { min-height: 3.6em; }

    /* TrÃªn mÃ n hÃ¬nh ráº¥t tháº¥p (Ä‘iá»‡n thoáº¡i náº±m ngang nhá») */
    @media (max-height: 420px) {
      .mini-card .card-body { padding: .5rem; }
      .mini-card .btn { padding: .4rem .5rem; font-size:.9rem; }
    }

    /* áº¨n app khi dá»c, hiá»‡n overlay nháº¯c xoay ngang */
    #rotateOverlay { display:none; position: fixed; inset:0; background: linear-gradient(135deg,#fdfbfb,#ebedee); z-index: 2000; align-items:center; justify-content:center; text-align:center; padding:2rem; }
    #rotateOverlay .box { max-width:520px; }
    @media (orientation: portrait) { #appContent{display:none!important} #rotateOverlay{display:flex} }
    @media (orientation: landscape) { #appContent{display:block} #rotateOverlay{display:none} }
  </style>
</head>
<body>
  <!-- Portrait overlay -->
  <div id="rotateOverlay">
    <div class="box">
      <div class="display-6 mb-3">ğŸ”„ Vui lÃ²ng xoay ngang Ä‘iá»‡n thoáº¡i</div>
      <p class="lead">Giao diá»‡n tá»‘i Æ°u 3 cá»™t: <strong>Hiá»‡u á»©ng</strong> â€” <strong>XÃºc xáº¯c</strong> â€” <strong>Trap</strong>.</p>
      <p class="text-muted mb-0">Máº¹o: Táº¯t khÃ³a xoay mÃ n hÃ¬nh náº¿u khÃ´ng xoay Ä‘Æ°á»£c.</p>
    </div>
  </div>

  <!-- App content (landscape) -->
  <div id="appContent" class="container py-2">
    <div class="toolbar d-flex justify-content-between align-items-center mb-2">
      <h1 class="h6 mb-0">ğŸ² Board Game Helper</h1>
      <div class="d-flex gap-2">
        <button id="btnClearLogs" class="btn btn-outline-danger btn-sm">ğŸ§¹ XÃ³a lá»‹ch sá»­</button>
      </div>
    </div>

    <div class="landscape-grid">
      <!-- LEFT: Effects -->
      <section class="mini-card">
        <div class="card mb-2">
          <div class="card-header py-2">Hiá»‡u á»©ng thÆ°á»ng</div>
          <div class="card-body">
            <div class="d-flex gap-2 flex-wrap mb-2">
              <button class="btn btn-success flex-fill" id="drawBenefit">âœ… CÃ³ lá»£i</button>
              <button class="btn btn-warning flex-fill" id="drawHarm">âš ï¸ Báº¥t lá»£i</button>
            </div>
            <div class="result small" id="resultNormal">ChÆ°a rÃºt.</div>
          </div>
        </div>
        <div class="card">
          <div class="card-header py-2">Hiá»‡u á»©ng cá»±c máº¡nh</div>
          <div class="card-body">
            <div class="d-flex gap-2 flex-wrap mb-2">
              <button class="btn btn-success flex-fill" id="drawBenefitX">ğŸ’¥ CÃ³ lá»£i CM</button>
              <button class="btn btn-warning flex-fill" id="drawHarmX">ğŸ”¥ Báº¥t lá»£i CM</button>
            </div>
            <div class="result small" id="resultExtreme">ChÆ°a rÃºt.</div>
          </div>
        </div>
      </section>

      <!-- CENTER: Dice prominent -->
      <section>
        <div class="card text-center">
          <div class="card-header py-2">XÃºc xáº¯c</div>
          <div class="card-body">
            <div id="die" class="die mb-3"></div>
            <div class="d-flex justify-content-center gap-2">
              <button id="btnRoll" class="btn btn-primary btn-lg">ğŸ² Láº¯c</button>
              <button id="btnRoll3" class="btn btn-outline-primary">ğŸ²Ã—3</button>
            </div>
            <div class="mt-2">Káº¿t quáº£: <span id="rollResult" class="fw-bold">â€”</span></div>
          </div>
        </div>
        <div class="card mt-2">
          <div class="card-header py-2">ğŸ“œ Lá»‹ch sá»­</div>
          <div class="card-body p-0">
            <ul class="list-group list-group-flush" id="history"></ul>
          </div>
        </div>
      </section>

      <!-- RIGHT: Trap compact -->
      <section class="mini-card">
        <div class="card">
          <div class="card-header py-2 d-flex justify-content-between align-items-center">
            <span>Trap</span>
            <button id="drawTrap" class="btn btn-sm btn-dark">ğŸ¯ Random</button>
          </div>
          <div class="card-body">
            <div class="result" id="trapResult">ChÆ°a bá»‘c thÄƒm trap nÃ o.</div>
          </div>
        </div>
      </section>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // ===== DATA =====
    const DATA={
      benefit:[
        {title:"Äá»¡ ÄÃ²n ThÃ nh CÃ´ng",desc:"Miá»…n trá»« hiá»‡u á»©ng báº¥t lá»£i tiáº¿p theo tá»« Ä‘á»‘i thá»§ hoáº·c tá»« Ã´ báº¡n Ä‘á»©ng vÃ o."},
        {title:"KhÃ³a Tay Nhu Thuáº­t",desc:"\"KhÃ³a\" má»™t ngÆ°á»i chÆ¡i khÃ¡c, khiáº¿n há» máº¥t lÆ°á»£t á»Ÿ vÃ²ng tiáº¿p theo."},
        {title:"Há»“i Sá»©c",desc:"Há»“i phá»¥c 1 máº¡ng (náº¿u cÃ³) hoáº·c thoÃ¡t khá»i má»™t hiá»‡u á»©ng tiÃªu cá»±c Ä‘ang Ã¡p dá»¥ng lÃªn báº¡n."}],
      harm:[
        {title:"Máº¥t ThÄƒng Báº±ng",desc:"LÃ¹i láº¡i 5 Ã´."},
        {title:"Äá»‘i Thá»§ Máº¡nh HÆ¡n",desc:"Bá»‹ Ä‘áº©y lÃ¹i vá» vá»‹ trÃ­ cá»§a ngÆ°á»i chÆ¡i xáº¿p nháº¥t trÆ°á»›c báº¡n."},
        {title:"Má»‡t Má»i",desc:"Sá»‘ Ã´ di chuyá»ƒn lÆ°á»£t tiáº¿p theo bá»‹ giáº£m má»™t ná»­a (lÃ m trÃ²n xuá»‘ng)."},
        {title:"Bong GÃ¢n",desc:"Bá» lÆ°á»£t tiáº¿p theo Ä‘á»ƒ \"há»“i phá»¥c\"."}],
      benefitX:[
        {title:"TÃ¡i hiá»‡n tuyá»‡t ká»¹",desc:"GÃ¢y áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n táº¥t cáº£ ngÆ°á»i chÆ¡i khÃ¡c, báº¡n chá»n 1 hiá»‡u á»©ng duy nháº¥t Ã¡p dá»¥ng."},
        {title:"Báº­t tháº§y",desc:"Báº¡n Ä‘Æ°á»£c miá»…n nhiá»…m hoÃ n toÃ n vá»›i má»i hiá»‡u á»©ng báº¥t lá»£i trong 2 vÃ²ng."},
        {title:"Song Äáº¥u Tháº¯ng Lá»£i",desc:"ÄÆ°á»£c rÃºt thÃªm 2 tháº» hiá»‡u á»©ng vÃ  giá»¯ láº¡i Ä‘á»ƒ dÃ¹ng sau."}],
      harmX:[
        {title:"Cháº¥n thÆ°Æ¡ng náº·ng",desc:"Bá» lÆ°á»£t liÃªn tiáº¿p 2 vÃ²ng, tráº£ láº¡i 1 tháº» hiá»‡u á»©ng cÃ³ lá»£i (náº¿u cÃ³)."},
        {title:"Tháº¥t báº¡i tÃ¢m lÃ­",desc:"Äá»•i vá»‹ trÃ­ cho ngÆ°á»i chÆ¡i cuá»‘i cÃ¹ng, máº¥t toÃ n bá»™ hiá»‡u á»©ng cÃ³ lá»£i."},
        {title:"Lá»—i ká»¹ thuáº­t tráº§m trá»ng",desc:"LÃ¹i vá» Ã´ xuáº¥t phÃ¡t, giáº£m 1 Ã´ di chuyá»ƒn vÄ©nh viá»…n."}],
      traps:[
        {title:"Máº¥t VÃµ CÃ´ng",desc:"Máº¥t lÆ°á»£t tiáº¿p theo (Ã¡p dá»¥ng cho ngÆ°á»i chÆ¡i khÃ¡c)."},
        {title:"ChiÃªu ÄÃ¡nh LÃ©n",desc:"Láº¥y 1 tháº» tá»« tay Ä‘á»‘i thá»§ (chá»n ngÆ°á»i chÆ¡i khÃ¡c)."},
        {title:"TrÆ°á»£t Ká»¹ Thuáº­t",desc:"LÃ¹i 2 Ã´, Ã¡p dá»¥ng cho báº£n thÃ¢n."},
        {title:"Máº¥t VÅ© KhÃ­",desc:"Máº¥t hiá»‡u á»©ng cá»§a 1 tháº» ká»¹ nÄƒng Ä‘ang sá»Ÿ há»¯u."},
        {title:"Bá»‹ KhÃ³a ÄÃ²n",desc:"KhÃ´ng Ä‘Æ°á»£c dÃ¹ng ká»¹ nÄƒng trong 1 lÆ°á»£t káº¿ tiáº¿p."},
        {title:"NgÃ£ SÃ n",desc:"Quay láº¡i Ã´ xuáº¥t phÃ¡t cá»§a vÃ²ng nÃ y."},
        {title:"Tinh Tháº§n ThÆ°á»£ng VÃµ",desc:"Báº¯t buá»™c táº·ng 1 tháº» thÆ°á»Ÿng cho ngÆ°á»i khÃ¡c."},
        {title:"ÄÃ²n ChÆ°á»Ÿng Láº¡c Äá»",desc:"Máº¥t 1 lÆ°á»£t vÃ  pháº£i ká»ƒ tÃªn 1 tháº¿ vÃµ hoáº·c danh lam VN."},
        {title:"VÃµ Sinh Há»“n Loáº¡n",desc:"Äá»•i toÃ n bá»™ tháº» vá»›i ngÆ°á»i bÃªn pháº£i."},
        {title:"SÆ° Phá»¥ Kiá»ƒm Tra",desc:"Tráº£ lá»i cÃ¢u há»i nhanh, sai thÃ¬ máº¥t lÆ°á»£t tiáº¿p theo."}]
    };

    // ===== Helpers =====
    const qs = s => document.querySelector(s);
    function rng(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
    function renderDie(n){const die=qs('#die');die.innerHTML='';const map={1:['mc'],2:['tl','br'],3:['tl','mc','br'],4:['tl','tr','bl','br'],5:['tl','tr','mc','bl','br'],6:['tl','ml','tr','mr','bl','br']};map[n].forEach(pos=>{const p=document.createElement('span');p.className='pip '+pos;die.appendChild(p);});}
    function addHistory(kind, text){const li=document.createElement('li');li.className='list-group-item d-flex justify-content-between align-items-start';li.innerHTML=`<span><span class="badge text-bg-secondary me-2">${kind}</span>${text}</span>`;qs('#history').prepend(li);}

    // Init
    renderDie(6);

    // Dice actions
    qs('#btnRoll').addEventListener('click', ()=>{const n=rng(1,6);renderDie(n);qs('#rollResult').textContent=n;addHistory('ğŸ²',`XÃºc xáº¯c â†’ <strong>${n}</strong>`);});
    qs('#btnRoll3').addEventListener('click', async ()=>{
      let results=[]; const rollOnce=()=>new Promise(res=>{setTimeout(()=>{const n=rng(1,6);renderDie(n);res(n);},220)});
      for(let i=0;i<3;i++) results.push(await rollOnce());
      qs('#rollResult').innerHTML = `${results.join(' + ')} = <strong>${results.reduce((a,b)=>a+b,0)}</strong>`;
      addHistory('ğŸ²', `3 láº§n â†’ <strong>${results.join(' + ')}</strong>`);
    });

    // Drawers (no-repeat per pool until exhausted)
    function makeDrawer(items){ let pool=[...items]; return { draw(){ if(pool.length===0) pool=[...items]; const idx=rng(0,pool.length-1); return pool.splice(idx,1)[0]; }, reset(){ pool=[...items]; } } }
    const drawers = { benefit:makeDrawer(DATA.benefit), harm:makeDrawer(DATA.harm), benefitX:makeDrawer(DATA.benefitX), harmX:makeDrawer(DATA.harmX), trap:makeDrawer(DATA.traps) };

    // Buttons left & right
    qs('#drawBenefit').addEventListener('click', ()=>{const p=drawers.benefit.draw(); qs('#resultNormal').innerHTML=`<strong>${p.title}</strong><br><small>${p.desc}</small>`; addHistory('âœ…', `<strong>${p.title}</strong>`);});
    qs('#drawHarm').addEventListener('click', ()=>{const p=drawers.harm.draw(); qs('#resultNormal').innerHTML=`<strong>${p.title}</strong><br><small>${p.desc}</small>`; addHistory('âš ï¸', `<strong>${p.title}</strong>`);});
    qs('#drawBenefitX').addEventListener('click', ()=>{const p=drawers.benefitX.draw(); qs('#resultExtreme').innerHTML=`<strong>${p.title}</strong><br><small>${p.desc}</small>`; addHistory('ğŸ’¥', `<strong>${p.title}</strong>`);});
    qs('#drawHarmX').addEventListener('click', ()=>{const p=drawers.harmX.draw(); qs('#resultExtreme').innerHTML=`<strong>${p.title}</strong><br><small>${p.desc}</small>`; addHistory('ğŸ”¥', `<strong>${p.title}</strong>`);});

    qs('#drawTrap').addEventListener('click', ()=>{const t=drawers.trap.draw(); qs('#trapResult').innerHTML=`<strong>${t.title}</strong><br><small>${t.desc}</small>`; addHistory('ğŸ¯', `<strong>${t.title}</strong>`);});

    // Clear history
    qs('#btnClearLogs').addEventListener('click', ()=>{qs('#history').innerHTML='';});
  </script>
</body>
</html>
